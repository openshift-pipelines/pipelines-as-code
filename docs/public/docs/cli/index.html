<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Pipelines as Code CLI #  Pipelines as Code provide a powerful CLI designed to work with tkn plugin. tkn-pac allows you to :
 bootstrap: quickly bootstrap a Pipelines as Code installation. create: create a new Pipelines as Code Repository. generate: generate a simple pipelinerun to get you started with Pipelines as Code. list: list Pipelines as Code Repositories. describe: describe a Pipelines as Code Repository and the runs associated with it.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="CLI" />
<meta property="og:description" content="Pipelines as Code CLI #  Pipelines as Code provide a powerful CLI designed to work with tkn plugin. tkn-pac allows you to :
 bootstrap: quickly bootstrap a Pipelines as Code installation. create: create a new Pipelines as Code Repository. generate: generate a simple pipelinerun to get you started with Pipelines as Code. list: list Pipelines as Code Repositories. describe: describe a Pipelines as Code Repository and the runs associated with it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/cli/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2022-03-28T13:38:08+02:00" />

<title>CLI | Pipelines as Code</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css" >
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.87c2aea66ebc19825a486b728a073f46259a73265a56f3a4fe9d002a94f9df48.js" ></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Pipelines as Code</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/install/" class="">Installation</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/install/github_apps/" class="">Github Apps</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/install/github_webhook/" class="">Github Webhook</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/install/gitlab/" class="">Gitlab</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/install/bitbucket_cloud/" class="">Bitbucket Cloud</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/install/bitbucket_server/" class="">Bitbucket Server</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/guide/" class="">Usage Guide</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cli/" class=" active">CLI</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>CLI</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#pipelines-as-code-cli">Pipelines as Code CLI</a>
      <ul>
        <li><a href="#install">Install</a>
          <ul>
            <li><a href="#binary-releases">Binary releases</a></li>
            <li><a href="#dev-release">Dev release</a></li>
            <li><a href="#brew-release">Brew release</a></li>
            <li><a href="#container">Container</a></li>
          </ul>
        </li>
        <li><a href="#commands">Commands</a>
          <ul>
            <li><a href="#bootstrap">bootstrap</a></li>
            <li><a href="#bootstrap-github-app">bootstrap github-app</a></li>
            <li><a href="#repository-creation">Repository creation</a></li>
            <li><a href="#repository-listing">Repository Listing</a></li>
            <li><a href="#repository-describe">Repository Describe</a></li>
            <li><a href="#generate">Generate</a></li>
            <li><a href="#resolve">Resolve</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="pipelines-as-code-cli">
  Pipelines as Code CLI
  <a class="anchor" href="#pipelines-as-code-cli">#</a>
</h1>
<p><img src="/images/tkn-pac-cli.png" alt="tkn-plugin" /></p>
<p>Pipelines as Code provide a powerful CLI designed to work with tkn plugin.  tkn-pac allows you to :</p>
<ul>
<li>bootstrap: quickly bootstrap a Pipelines as Code installation.</li>
<li>create: create a new Pipelines as Code Repository.</li>
<li>generate: generate a simple pipelinerun to get you started with Pipelines as Code.</li>
<li>list: list Pipelines as Code Repositories.</li>
<li>describe: describe a Pipelines as Code Repository and the runs associated with it.</li>
<li>resolve: Resolve a pipelinerun as if it were executed by pipelines as code on service.</li>
</ul>
<h2 id="install">
  Install
  <a class="anchor" href="#install">#</a>
</h2>
<h3 id="binary-releases">
  Binary releases
  <a class="anchor" href="#binary-releases">#</a>
</h3>
<p>You can grab the latest binary directly from the
<a href="https://github.com/openshift-pipelines/pipelines-as-code/releases">releases</a>
page.</p>
<h3 id="dev-release">
  Dev release
  <a class="anchor" href="#dev-release">#</a>
</h3>
<p>If you want to install from the git repository you can just do :</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>go install github.com/openshift-pipelines/pipelines-as-code/cmd/tkn-pac
</span></span></code></pre></div><h3 id="brew-release">
  Brew release
  <a class="anchor" href="#brew-release">#</a>
</h3>
<p>On <a href="https://docs.brew.sh/Homebrew-on-Linux">LinuxBrew</a> or <a href="https://brew.sh/">OSX brew</a> you can simply add the Brew tap
to have the tkn-pac plugin and its completion installed :</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>brew install openshift-pipelines/pipelines-as-code/tektoncd-pac
</span></span></code></pre></div><p>and simply upgrade with :</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>brew upgrade openshift-pipelines/pipelines-as-code/tektoncd-pac
</span></span></code></pre></div><h3 id="container">
  Container
  <a class="anchor" href="#container">#</a>
</h3>
<p><code>tkn-pac</code> is as well available as a container :</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># use docker</span>
</span></span><span style="display:flex;"><span>podman run -e <span style="color:#111">KUBECONFIG</span><span style="color:#f92672">=</span>/tmp/kube/config -v <span style="color:#d88200">${</span><span style="color:#111">HOME</span><span style="color:#d88200">}</span>/.kube:/tmp/kube <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>     -it quay.io/openshift-pipeline/pipelines-as-code tkn-pac <span style="color:#111">help</span>
</span></span></code></pre></div><h2 id="commands">
  Commands
  <a class="anchor" href="#commands">#</a>
</h2>
<h3 id="bootstrap">
  bootstrap
  <a class="anchor" href="#bootstrap">#</a>
</h3>
<p><code>tkn pac bootstrap</code> command will help you getting started installing and configuring Pipelines as code. It currently supports the following providers:</p>
<ul>
<li>Github application on public Github</li>
<li>Github application on Github Enterprise</li>
</ul>
<p>It will start checking if you have installed Pipelines as Code and if not it will ask you if you want to  install (with <code>kubectl</code>) the latest stable release. If you add the flag <code>--nightly</code> it will install the latest code ci release.</p>
<p>Bootstrap detect the OpenShift Route automatically associated to the Pipelines as code controller service.
If you don&rsquo;t have an OpenShift install it will ask you for your public URL (ie: an ingress spec url)
You can override the URL with the flag <code>--route-url</code>.</p>
<h3 id="bootstrap-github-app">
  bootstrap github-app
  <a class="anchor" href="#bootstrap-github-app">#</a>
</h3>
<p>If you only want to create the Github application you can use <code>tkn pac bootstrap github-app</code> directly which would skip the installation and only create the
github application and the secret with all the information needed in the
<code>pipelines-as-code</code> namespace.</p>
<h3 id="repository-creation">
  Repository creation
  <a class="anchor" href="#repository-creation">#</a>
</h3>
<p><code>tkn pac repo create</code> &ndash; will create a new Pipelines as Code Repository and a namespace where the pipelineruns command. It will launch the <code>tkn pac generate</code> command right after the creation.</p>
<h3 id="repository-listing">
  Repository Listing
  <a class="anchor" href="#repository-listing">#</a>
</h3>
<p><code>tkn pac repo list</code> &ndash; will list all the Pipelines as Code Repositories and display the last status of the runs associated with it.</p>
<h3 id="repository-describe">
  Repository Describe
  <a class="anchor" href="#repository-describe">#</a>
</h3>
<p><code>tkn pac repo describe</code> &ndash; will describe a Pipelines as Code Repository and the runs associated with it.</p>
<p>On modern terminal (ie: <a href="https://iterm2.com/">iTerm2</a>, <a href="https://github.com/microsoft/terminal">Windows Terminal</a>, gnome-terminal etc..) the links are clickable via control+click or âŒ˜+click and will open the browser to the UI URL to see the Pipelinerun associated with it.</p>
<h3 id="generate">
  Generate
  <a class="anchor" href="#generate">#</a>
</h3>
<p><code>tkn pac generate</code>: will generate a simple pipelinerun to get you started with Pipelines as Code. It will try to be as smart as possible by detecting the current git information if you run the command from your source code.</p>
<p>It has some basic language detection and add extra task depending of the language. For example if it detects a file named <code>setup.py</code> at the repository root it will add the <a href="https://hub.tekton.dev/tekton/task/pylint">pylint task</a> to the generated pipelinerun.</p>
<h3 id="resolve">
  Resolve
  <a class="anchor" href="#resolve">#</a>
</h3>
<p><code>tkn-pac resolve</code>: will run a pipelinerun as if it were executed by pipelines
as code on service.</p>
<p>For example if you have a pipelinerun in the <code>.tekton/pull-request.yaml</code> file you can run the command <code>tkn-pac resolve</code> to see it running:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">tkn pac resolve -f .tekton/pull-request.yaml|kubectl apply -f -</span>
</span></span></code></pre></div><p>Combined with a kubernetes install running on your local machine (like<a href="https://developers.redhat.com/products/codeready-containers/overview">Code Ready Containers</a> or <a href="https://kind.sigs.k8s.io/docs/user/quick-start/">Kubernetes Kind</a> ) you can see your run in action without having to generate a new commit.</p>
<p>If you run the command from your source code repository it will try to detect the current git information and resolve the parameters like current revision or branch. You can override those params with the <code>-p</code> option. For example if you want to use a git branch as revision and another repo name than the current repo name you can just use :</p>
<p><code>tkn pac resolve -f .tekton/pr.yaml -p revision=main -p repo_name=othername</code></p>
<p><code>-f</code> can as well accept a directory path instead of just a filename and grab every <code>yaml</code>/<code>yml</code> from the directory.</p>
<p>You can specify multiple <code>-f</code> on the command line.</p>
<p>You need to make sure that git-clone task (if you use it) can access the repository to the SHA. Which mean if you test your current source code you need to push it first tbefore using <code>tkn pac resolve|kubectl apply</code>.</p>
<p>Compared with running directly on CI, you need to explicitely specify the list of filenames or directory where you have the templates.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#pipelines-as-code-cli">Pipelines as Code CLI</a>
      <ul>
        <li><a href="#install">Install</a>
          <ul>
            <li><a href="#binary-releases">Binary releases</a></li>
            <li><a href="#dev-release">Dev release</a></li>
            <li><a href="#brew-release">Brew release</a></li>
            <li><a href="#container">Container</a></li>
          </ul>
        </li>
        <li><a href="#commands">Commands</a>
          <ul>
            <li><a href="#bootstrap">bootstrap</a></li>
            <li><a href="#bootstrap-github-app">bootstrap github-app</a></li>
            <li><a href="#repository-creation">Repository creation</a></li>
            <li><a href="#repository-listing">Repository Listing</a></li>
            <li><a href="#repository-describe">Repository Describe</a></li>
            <li><a href="#generate">Generate</a></li>
            <li><a href="#resolve">Resolve</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












